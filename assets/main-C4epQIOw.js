import{c as m,N as h,s as a,P as p,L as f,M as b,u as s}from"./NotFoundPage-mODT4bMw.js";const l="/front_5th_chapter1-1",w=t=>{const{subscribe:e,notify:o}=m(),n=()=>window.location.pathname.replace(l,""),i=()=>t[window.location.pathname]??h,c=d=>{window.history.pushState({},"",`${l}${d}`),o()};return window.addEventListener("popstate",()=>o()),{push:c,subscribe:e,getTarget:i,getPath:n}},g="/front_5th_chapter1-1",L={[`${g}/`]:b,[`${g}/login`]:f,[`${g}/profile`]:p},r=w(L),u=()=>{const t=r.getPath(),{loggedIn:e}=a.getState();if(t==="/login"&&e){r.push("/");return}if(t==="/profile"&&!e){r.push("/login");return}const o=document.getElementById("root"),n=r.getTarget();o.innerHTML=n()},S=t=>{t.preventDefault();const e=t.target.id,o=new FormData(t.target);if(e==="login-form"){const n=o.get("username").trim();s.set({username:n,email:"",bio:""}),a.setState({user:s.get(),loggedIn:!0});return}if(e==="profile-form"){const n=o.get("username").trim(),i=o.get("email").trim(),c=o.get("bio").trim();s.set({username:n,email:i,bio:c}),a.setState({user:s.get()});return}},P=t=>{const e=t.target.closest("a");if(e){if(t.preventDefault(),e.id==="logout"){$();return}const o=e.href.replace(window.location.origin,"");r.push(o)}},$=()=>{s.reset(),a.setState({user:s.get(),loggedIn:!1}),r.push("/login")},v=()=>{r.subscribe(u),a.subscribe(u),document.body.addEventListener("click",P),document.body.addEventListener("submit",S),u()};v();
