import{c as l,N as d,s as a,P as m,L as h,M as f,u as r}from"./NotFoundPage-BpTyviUA.js";const p=t=>{const{subscribe:e,notify:o}=l(),n=()=>window.location.hash.slice(1)||"/",i=()=>{const g=n();return t[g]??d},c=g=>{window.location.hash=g};return window.addEventListener("hashchange",()=>o()),{push:c,subscribe:e,getTarget:i,getPath:n}},b={"/":f,"/login":h,"/profile":m},s=p(b),u=()=>{const t=s.getPath(),{loggedIn:e}=a.getState();if(t==="/login"&&e){s.push("/");return}if(t==="/profile"&&!e){s.push("/login");return}const o=document.getElementById("root"),n=s.getTarget();o.innerHTML=n()},w=t=>{t.preventDefault();const e=t.target.id,o=new FormData(t.target);if(e==="login-form"){const n=document.getElementById("username").value;r.set({username:n,email:"",bio:""}),a.setState({user:r.get(),loggedIn:!0});return}if(e==="profile-form"){const n=o.get("username").trim(),i=o.get("email").trim(),c=o.get("bio").trim();r.set({username:n,email:i,bio:c}),a.setState({user:r.get()});return}},P=t=>{const e=t.target.closest("a");if(e){if(t.preventDefault(),e.id==="logout"){v();return}const o=e.href.replace(window.location.origin,"");s.push(o)}},v=()=>{r.reset(),a.setState({user:r.get(),loggedIn:!1}),s.push("/login")},L=()=>{s.subscribe(u),a.subscribe(u),document.body.addEventListener("click",P),document.body.addEventListener("submit",w),u()};L();
